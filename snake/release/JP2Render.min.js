!function(){var i={};i.create=function(n){var r={controller:i,world:null,wireframes:!0,hasBounds:!1};for(var o in n)r[o]=n[o];var e=r;return e.container=e.container||Laya.stage,e.bounds=e.bounds||{min:{x:0,y:0},max:{x:e.width,y:e.height}},e},i.run=function(n){Laya.timer.frameLoop(1,this,i.world,[n]),n.world.on("removeBody",i.onRemoveSprite)},i.stop=function(n){Laya.timer.clear(this,i.world),n.world.off("removeBody",i.onRemoveSprite)},i.onRemoveSprite=function(i){var n=i.body.layaSprite;n&&n.parent&&n.parent.removeChild(n)},i.world=function(n){var r,o=(n.world,n.container,n.world.bodies),e=n.bounds.max.x-n.bounds.min.x,a=n.bounds.max.y-n.bounds.min.y;e/n.width,a/n.height;for(r=0;r<o.length;r++)i.body(n,o[r])},i.setBackground=function(i,n){if(i.currentBackground!==n){var r=n.indexOf&&-1!==n.indexOf("#");i.container.graphics.clear(),r?i.container.bgColor=n:(i.container.loadImage(n),i.container.bgColor="#FFFFFF"),i.currentBackground=n}},i.body=function(i,r){var o=(i.world,"b-"+r.id,r.layaSprite),e=i.container;o||(o=r.layaSprite=n(i,r),o.initialAngle=r.angle),e.contains(o)||e.addChild(o),o.x=r.position[0],o.y=r.position[1],o.rotation=180*(r.angle-o.initialAngle)/Math.PI};var n=function(i,n){var r,o,e,a,t=(n.render,i.options,new Laya.Sprite),d=[],s=t.graphics;s.clear();for(var c=0;c<n.shapes.length;c++){if(a=n.shapes[c],i.wireframes&&(r=null,o="#ff0000",e=1),a.radius)s.drawCircle(a.position[0],a.position[1],a.radius,r,o,e);else{d.push(a.vertices[0][0],a.vertices[0][1]);for(var l=1;l<a.vertices.length;l++)d.push(a.vertices[l][0],a.vertices[l][1]);d.push(a.vertices[0][0],a.vertices[0][1]),s.drawPoly(0,0,d,r,o,e)}i.showPositions&&s.drawCircle(0,0,2,o)}return t};i.constraint=function(i,n){var r=(i.engine,n.bodyA),o=n.bodyB,e=n.pointA,a=n.pointB,t=i.container,d=n.render,s=("c-"+n.id,n.layaSprite);s||(s=n.layaSprite=new Laya.Sprite);var c=s.graphics;if(!d.visible||!n.pointA||!n.pointB)return void c.clear();t.contains(s)||t.addChild(s),c.clear();var l,p,u,v;r?(l=r.position.x+e.x,p=r.position.y+e.y):(l=e.x,p=e.y),o?(u=o.position.x+a.x,v=o.position.y+a.y):(u=a.x,v=a.y),c.drawLine(l,p,u,v,d.strokeStyle,d.lineWidth)},window.JP2Render=i}();